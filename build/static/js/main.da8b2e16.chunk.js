(this.webpackJsonpthephonebook=this.webpackJsonpthephonebook||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var c=t(0),o=t(1),r=t(15),a=t.n(r),i=t(4),u=t(3),s=function(e){return Object(c.jsxs)("div",{children:["filter shown with ",Object(c.jsx)("input",{value:e.value,onChange:e.onChange})]})},l=function(e){return Object(c.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:e.name_value,onChange:e.name_onChange})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:e.number_value,onChange:e.number_onChange})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.searchWord,t=e.persons,o=e.searchPersons;return Object(c.jsx)("ul",{children:""===n?t.map((function(n){return Object(c.jsxs)("div",{children:[Object(c.jsxs)("li",{children:[n.name," ",n.number]},n.name),Object(c.jsx)("button",{onClick:function(){e.onButtonClick(n)},children:"delete"})]},n.name)})):o.map((function(n){return Object(c.jsxs)("div",{children:[Object(c.jsxs)("li",{children:[n.name," ",n.number]},n.name),Object(c.jsx)("button",{onClick:function(){e.onButtonClick(n)},children:"delete"})]},n.name)}))})},b=t(5),j=t.n(b),m="/api/persons",f=function(){return j.a.get(m).then((function(e){return e.data}))},h=function(e){return j.a.post(m,e).then((function(e){return e.data}))},O=function(e){return j.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},g=function(e){return j.a.put("".concat(m,"/").concat(e.id),e).then((function(e){return e.data}))},v=function(e){var n=e.message;if(null===n)return null;return Object(c.jsx)("div",{style:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n})},x=function(e){var n=e.message;if(null===n)return null;return Object(c.jsx)("div",{style:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n})},p=function(){var e=Object(o.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],a=Object(o.useState)({name:"",number:""}),b=Object(u.a)(a,2),j=b[0],m=b[1],p=Object(o.useState)([]),C=Object(u.a)(p,2),k=C[0],w=C[1],S=Object(o.useState)(""),y=Object(u.a)(S,2),_=y[0],B=y[1],T=Object(o.useState)(null),I=Object(u.a)(T,2),P=I[0],z=I[1],D=Object(o.useState)(null),E=Object(u.a)(D,2),J=E[0],L=E[1];Object(o.useEffect)((function(){console.log("fetching data..."),f().then((function(e){r(e)}))}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(v,{message:P}),Object(c.jsx)(x,{message:J}),Object(c.jsx)(s,{value:_,onChange:function(e){var n=e.target.value;B(n),w(t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})))}}),Object(c.jsx)("h2",{children:"add a new"}),Object(c.jsx)(l,{onSubmit:function(e){if(e.preventDefault(),console.log("submitted"),t.find((function(e){return e.name===j.name}))){var n=Object(i.a)(Object(i.a)({},j),{},{id:t.find((function(e){return e.name===j.name})).id});window.confirm("".concat(n.name," is already added to phonebook, replace the old number with a  new one?"))&&g(n).then((function(e){console.log(e),r(t.map((function(n){return n.id!==e.id?n:e}))),z("Updated ".concat(n.name,"'s phone number")),setTimeout((function(){z(null)}),5e3)})).catch((function(e){L("Information of ".concat(n.name," has already been removed from server")),setTimeout((function(){L(null)}),5e3),r(t.filter((function(e){return e.id!==n.id})))}))}else h(j).then((function(e){r(t.concat(e)),z("Added ".concat(j.name)),setTimeout((function(){z(null)}),5e3)}));m({name:"",number:""})},name_value:j.name,name_onChange:function(e){m(Object(i.a)(Object(i.a)({},j),{},{name:e.target.value}))},number_value:j.number,number_onChange:function(e){m(Object(i.a)(Object(i.a)({},j),{},{number:e.target.value}))}}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(d,{searchWord:_,persons:t,searchPersons:k,onButtonClick:function(e){window.confirm("Delete ".concat(e.name,"?"))&&(console.log("deleting id: ",e.id),O(e.id).then((function(){console.log("deleted ",e.name),r(t.filter((function(n){return n.id!==e.id})))})).catch((function(n){L("Information of ".concat(e.name," has already been removed from server")),setTimeout((function(){L(null)}),5e3),r(t.filter((function(n){return n.id!==e.id})))})))}})]})};a.a.render(Object(c.jsx)(p,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.da8b2e16.chunk.js.map